<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%
	String cp = request.getContextPath();
%>
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ïã†Í≥† ÏÉÅÏÑ∏Î≥¥Í∏∞ - Í≥µÎ™®ÏûêÎì§</title>
<style>
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

body {
	font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
	background: #f5f7fa;
	padding: 40px 20px;
}

.container {
	max-width: 1000px;
	margin: 0 auto;
}

.header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 30px;
	flex-wrap: wrap;
	gap: 20px;
}

.header-left {
	display: flex;
	align-items: center;
	gap: 15px;
}

.back-btn {
	background: #e8f5e6;
	color: #2d5a29;
	border: none;
	padding: 10px 16px;
	border-radius: 8px;
	cursor: pointer;
	font-size: 20px;
	transition: all 0.2s ease;
	text-decoration: none;
	display: flex;
	align-items: center;
}

.back-btn:hover {
	background: #d4ecd1;
	transform: translateX(-3px);
}

.page-title {
	font-size: 32px;
	font-weight: bold;
	color: #2d5a29;
}

.action-buttons {
	display: flex;
	gap: 10px;
}

.btn {
	padding: 10px 20px;
	border: none;
	border-radius: 8px;
	font-size: 14px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	gap: 6px;
	text-decoration: none;
}

.btn-process {
	background: #2d5a29;
	color: white;
}

.btn-process:hover {
	background: #1f4019;
	transform: translateY(-2px);
}

.btn-reject {
	background: #ff6b6b;
	color: white;
}

.btn-reject:hover {
	background: #ff5252;
	transform: translateY(-2px);
}

.report-container {
	background: white;
	border-radius: 12px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
	overflow: hidden;
}

.report-header {
	padding: 30px 40px;
	border-bottom: 2px solid #f0f0f0;
}

.report-title-section {
	display: flex;
	align-items: flex-start;
	gap: 12px;
	margin-bottom: 20px;
}

.report-type-badge {
	background: #2d5a29;
	color: white;
	padding: 6px 14px;
	border-radius: 12px;
	font-size: 13px;
	font-weight: bold;
	flex-shrink: 0;
}

.report-title {
	font-size: 28px;
	font-weight: bold;
	color: #333;
	line-height: 1.4;
	word-break: keep-all;
}

.report-meta {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	gap: 20px;
	padding: 20px 40px;
	background: #f8faf9;
	border-bottom: 1px solid #e8f5e6;
}

.meta-item {
	display: flex;
	flex-direction: column;
	gap: 6px;
}

.meta-label {
	color: #666;
	font-size: 13px;
	font-weight: 500;
}

.meta-value {
	color: #333;
	font-size: 15px;
	font-weight: 600;
}

.meta-value.highlight {
	color: #2d5a29;
	font-size: 16px;
}

.category-badge {
	display: inline-block;
	padding: 6px 12px;
	border-radius: 14px;
	font-size: 13px;
	font-weight: 600;
	white-space: nowrap;
}

.category-spam {
	background: #ffe0e0;
	color: #d32f2f;
}

.category-abuse {
	background: #fff3e0;
	color: #f57c00;
}

.category-inappropriate {
	background: #fce4ec;
	color: #c2185b;
}

.category-other {
	background: #e0e0e0;
	color: #666;
}

.status-badge {
	display: inline-block;
	padding: 6px 14px;
	border-radius: 16px;
	font-size: 13px;
	font-weight: 600;
	white-space: nowrap;
}

.status-pending {
	background: #fff3e0;
	color: #f57c00;
}

.status-processing {
	background: #e3f2fd;
	color: #1976d2;
}

.status-completed {
	background: #e8f5e9;
	color: #388e3c;
}

.status-rejected {
	background: #f5f5f5;
	color: #666;
}

.report-content {
	padding: 40px;
}

.content-section {
	margin-bottom: 30px;
}

.content-section-title {
	font-size: 18px;
	font-weight: bold;
	color: #2d5a29;
	margin-bottom: 15px;
	padding-bottom: 10px;
	border-bottom: 2px solid #e8f5e6;
}

.content-text {
	line-height: 1.8;
	font-size: 15px;
	color: #333;
	word-break: keep-all;
	background: #f8faf9;
	padding: 20px;
	border-radius: 8px;
	border-left: 4px solid #a8d5a1;
}

.target-preview {
	background: #fff9e6;
	border: 2px solid #ffc107;
	border-radius: 10px;
	padding: 20px;
	margin-top: 15px;
}

.target-preview-title {
	font-weight: 600;
	color: #f57c00;
	margin-bottom: 12px;
	display: flex;
	align-items: center;
	gap: 6px;
}

.target-preview-content {
	color: #666;
	font-size: 14px;
	line-height: 1.6;
}

.evidence-images {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
	gap: 15px;
	margin-top: 15px;
}

.evidence-image {
	width: 100%;
	height: 200px;
	background: #f0f0f0;
	border-radius: 8px;
	display: flex;
	align-items: center;
	justify-content: center;
	color: #999;
	font-size: 48px;
	border: 2px solid #e0e0e0;
	cursor: pointer;
	transition: all 0.2s ease;
}

.evidence-image:hover {
	border-color: #a8d5a1;
	transform: scale(1.02);
}

.admin-notes {
	background: #e8f5e6;
	border-left: 4px solid #2d5a29;
	padding: 20px;
	border-radius: 8px;
	margin-top: 20px;
}

.admin-notes-title {
	font-weight: 600;
	color: #2d5a29;
	margin-bottom: 10px;
	display: flex;
	align-items: center;
	gap: 6px;
}

.admin-notes-content {
	color: #666;
	font-size: 14px;
	line-height: 1.6;
}

.report-footer {
	padding: 30px 40px;
	border-top: 2px solid #f0f0f0;
	background: #f8faf9;
	display: flex;
	justify-content: space-between;
	align-items: center;
	flex-wrap: wrap;
	gap: 20px;
}

.footer-info {
	font-size: 13px;
	color: #999;
}

.footer-buttons {
	display: flex;
	gap: 10px;
}

.btn-list {
	background: #8bc683;
	color: white;
	padding: 12px 24px;
}

.btn-list:hover {
	background: #7ab872;
	transform: translateY(-2px);
}

.warning-box {
	background: #ffebee;
	border-left: 4px solid #ff6b6b;
	padding: 16px 20px;
	margin: 0 40px 20px 40px;
	border-radius: 6px;
}

.warning-box-title {
	font-weight: 600;
	color: #d32f2f;
	margin-bottom: 8px;
	display: flex;
	align-items: center;
	gap: 6px;
}

.warning-box-content {
	font-size: 14px;
	color: #666;
	line-height: 1.6;
}

/* Î∞òÏùëÌòï */
@media (max-width: 768px) {
	body {
		padding: 20px 10px;
	}
	
	.page-title {
		font-size: 24px;
	}
	
	.header {
		flex-direction: column;
		align-items: flex-start;
	}
	
	.action-buttons {
		width: 100%;
	}
	
	.btn {
		flex: 1;
		justify-content: center;
	}
	
	.report-header,
	.report-meta,
	.report-content,
	.report-footer {
		padding: 20px;
	}
	
	.warning-box,
	.admin-notes {
		margin: 0 20px 20px 20px;
	}
	
	.report-title {
		font-size: 22px;
	}
	
	.report-meta {
		grid-template-columns: 1fr;
		gap: 15px;
	}
	
	.report-footer {
		flex-direction: column;
		align-items: stretch;
	}
	
	.footer-buttons {
		width: 100%;
	}
	
	.btn-list {
		width: 100%;
		justify-content: center;
	}
	
	.evidence-images {
		grid-template-columns: 1fr;
	}
}
</style>
</head>
<body>
	<%
		// Ïã†Í≥† IDÏôÄ ÌÉÄÏûÖ Î∞õÍ∏∞
		String reportId = request.getParameter("id");
		String reportType = request.getParameter("type");
		if (reportId == null) reportId = "12";
		if (reportType == null) reportType = "member";
		
		// Ïã§Ï†úÎ°úÎäî DBÏóêÏÑú Ï°∞Ìöå
		String reportNumber = reportId;
		String reporterUserId = "user123";
		String targetUserId = "baduser01";
		String category = "ÏöïÏÑ§/ÎπÑÎ∞©";
		String categoryClass = "category-abuse";
		String status = "ÎåÄÍ∏∞Ï§ë";
		String statusClass = "status-pending";
		String reportDate = "2025-01-10 14:30:25";
		String reason = "Ï±ÑÌåÖÏóêÏÑú ÏßÄÏÜçÏ†ÅÏúºÎ°ú ÏöïÏÑ§ÏùÑ ÏÇ¨Ïö©ÌïòÍ≥† Îã§Î•∏ ÌöåÏõêÎì§ÏùÑ ÎπÑÎ∞©Ìï©ÎãàÎã§. Ïó¨Îü¨ Ï∞®Î°Ä Í≤ΩÍ≥†ÌñàÏßÄÎßå ÌñâÎèôÏùÑ Í≥†ÏπòÏßÄ ÏïäÍ≥† ÏûàÏäµÎãàÎã§.";
		String targetContent = "Ìï¥Îãπ ÌöåÏõêÏù¥ Î™®ÏûÑ Ï±ÑÌåÖÎ∞©ÏóêÏÑú ÏÇ¨Ïö©Ìïú Î∂ÄÏ†ÅÏ†àÌïú Ïñ∏Ïñ¥: \"Ïù¥ XXÎì§ÏïÑ\", \"XXÎÇò ÌïòÏßÄÎßà\" Îì±Ïùò ÏöïÏÑ§ÏùÑ Î∞òÎ≥µÏ†ÅÏúºÎ°ú ÏÇ¨Ïö©Ìï®.";
		
		String typeTitle = "";
		String typeIcon = "";
		if ("member".equals(reportType)) {
			typeTitle = "ÌöåÏõê";
			typeIcon = "üë§";
		} else if ("meeting".equals(reportType)) {
			typeTitle = "Î™®ÏûÑ";
			typeIcon = "üìö";
		} else {
			typeTitle = "ÏΩòÌÖêÏ∏†";
			typeIcon = "üìù";
		}
	%>
	
	<div class="container">
		<div class="header">
			<div class="header-left">
				<a href="admin_report_list.jsp?tab=<%= reportType %>" class="back-btn">‚Üê</a>
				<h1 class="page-title">Ïã†Í≥† ÏÉÅÏÑ∏Î≥¥Í∏∞</h1>
			</div>
			<% if ("ÎåÄÍ∏∞Ï§ë".equals(status) || "Ï≤òÎ¶¨Ï§ë".equals(status)) { %>
			<div class="action-buttons">
				<button class="btn btn-process" onclick="processReport('<%= reportId %>')">
					<span>‚úì</span>
					<span>Ï≤òÎ¶¨ÏôÑÎ£å</span>
				</button>
				<button class="btn btn-reject" onclick="rejectReport('<%= reportId %>')">
					<span>‚úï</span>
					<span>Ïã†Í≥†Î∞òÎ†§</span>
				</button>
			</div>
			<% } %>
		</div>
		
		<div class="report-container">
			<div class="report-header">
				<div class="report-title-section">
					<span class="report-type-badge"><%= typeIcon %> <%= typeTitle %></span>
					<h2 class="report-title">Ïã†Í≥†Î≤àÌò∏ #<%= reportNumber %></h2>
				</div>
			</div>
			
			<div class="report-meta">
				<div class="meta-item">
					<span class="meta-label">Ïã†Í≥†Ïûê ÏïÑÏù¥Îîî</span>
					<span class="meta-value highlight"><%= reporterUserId %></span>
				</div>
				<div class="meta-item">
					<span class="meta-label">Ïã†Í≥†ÎåÄÏÉÅ ÏïÑÏù¥Îîî</span>
					<span class="meta-value highlight"><%= targetUserId %></span>
				</div>
				<div class="meta-item">
					<span class="meta-label">Ïã†Í≥†Î∂ÑÎ•ò</span>
					<span class="meta-value">
						<span class="category-badge <%= categoryClass %>"><%= category %></span>
					</span>
				</div>
				<div class="meta-item">
					<span class="meta-label">Ïã†Í≥†ÏùºÏãú</span>
					<span class="meta-value"><%= reportDate %></span>
				</div>
				<div class="meta-item">
					<span class="meta-label">Ï≤òÎ¶¨ÏÉÅÌÉú</span>
					<span class="meta-value">
						<span class="status-badge <%= statusClass %>"><%= status %></span>
					</span>
				</div>
				<div class="meta-item">
					<span class="meta-label">Ïã†Í≥† Ïú†Ìòï</span>
					<span class="meta-value"><%= typeTitle %></span>
				</div>
			</div>
			
			<% if ("ÎåÄÍ∏∞Ï§ë".equals(status)) { %>
			<div class="warning-box">
				<div class="warning-box-title">
					<span>‚ö†Ô∏è</span>
					<span>Ï≤òÎ¶¨ ÎåÄÍ∏∞ Ï§ë</span>
				</div>
				<div class="warning-box-content">
					Ïù¥ Ïã†Í≥†Îäî ÏïÑÏßÅ Ï≤òÎ¶¨ÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§. Ïã†Í≥† ÎÇ¥Ïö©ÏùÑ ÌôïÏù∏ÌïòÍ≥† Ï†ÅÏ†àÌïú Ï°∞ÏπòÎ•º Ï∑®Ìï¥Ï£ºÏÑ∏Ïöî.
				</div>
			</div>
			<% } %>
			
			<div class="report-content">
				<!-- Ïã†Í≥† ÏÇ¨Ïú† -->
				<div class="content-section">
					<h3 class="content-section-title">üìã Ïã†Í≥† ÏÇ¨Ïú†</h3>
					<div class="content-text">
						<%= reason %>
					</div>
				</div>
				
				<!-- Ïù¥Ï†Ñ Ïã†Í≥† Ïù¥Î†• -->
				<div class="content-section">
					<h3 class="content-section-title">üìä Ïã†Í≥† ÎåÄÏÉÅÏùò Ïù¥Ï†Ñ Ïã†Í≥† Ïù¥Î†•</h3>
					<div class="content-text">
						<strong>Ï¥ù Ïã†Í≥† ÌöüÏàò:</strong> 3Ìöå<br>
						<strong>ÏµúÍ∑º Ïã†Í≥†Ïùº:</strong> 2025-01-08<br>
						<strong>Ï≤òÎ¶¨ Í≤∞Í≥º:</strong> Í≤ΩÍ≥† 2Ìöå, Ï†ïÏßÄ 1Ìöå<br><br>
						Ìï¥Îãπ ÌöåÏõêÏùÄ Í≥ºÍ±∞ÏóêÎèÑ Ïú†ÏÇ¨Ìïú Ïã†Í≥†Î•º Î∞õÏùÄ Ïù¥Î†•Ïù¥ ÏûàÏäµÎãàÎã§. Î∞òÎ≥µÏ†ÅÏù∏ Î¨∏Ï†ú ÌñâÎèôÏúºÎ°ú ÌåêÎã®Îê©ÎãàÎã§.
					</div>
				</div>
				
				<% if (!"ÎåÄÍ∏∞Ï§ë".equals(status)) { %>
				<!-- Í¥ÄÎ¶¨Ïûê Ï≤òÎ¶¨ ÎÇ¥Ïó≠ -->
				<div class="admin-notes">
					<div class="admin-notes-title">
						<span>üõ°Ô∏è</span>
						<span>Í¥ÄÎ¶¨Ïûê Ï≤òÎ¶¨ ÎÇ¥Ïó≠</span>
					</div>
					<div class="admin-notes-content">
						<strong>Ï≤òÎ¶¨ ÏùºÏãú:</strong> 2025-01-10 16:45:30<br>
						<strong>Ï≤òÎ¶¨ Í¥ÄÎ¶¨Ïûê:</strong> admin01<br>
						<strong>Ï°∞Ïπò ÏÇ¨Ìï≠:</strong> Ìï¥Îãπ ÌöåÏõêÏóêÍ≤å 7Ïùº ÌôúÎèô Ï†ïÏßÄ Ï≤òÎ∂Ñ<br>
						<strong>Ï≤òÎ¶¨ ÏùòÍ≤¨:</strong> Ïã†Í≥† ÎÇ¥Ïö©Ïù¥ Î™ÖÌôïÌïòÍ≥† Ï¶ùÍ±∞Í∞Ä Ï∂©Î∂ÑÌï®. Î∞òÎ≥µÏ†ÅÏù∏ Í∑úÏ†ï ÏúÑÎ∞òÏúºÎ°ú ÌôúÎèô Ï†ïÏßÄ Ï≤òÎ∂ÑÌï®.
					</div>
				</div>
				<% } %>
			</div>
			
			<div class="report-footer">
				<div class="footer-info">
					Ïã†Í≥† Ï†ëÏàòÏùº: <%= reportDate %>
				</div>
				<div class="footer-buttons">
					<a href="<%=cp %>/manager/report/ReportList.jsp?tab=<%= reportType %>" class="btn btn-list">
						<span>üìã</span>
						<span>Î™©Î°ùÏúºÎ°ú</span>
					</a>
				</div>
			</div>
		</div>
	</div>
	
	<script>
		// Ïã†Í≥† Ï≤òÎ¶¨
		function processReport(id) {
			const reason = prompt('Ï≤òÎ¶¨ ÏùòÍ≤¨ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî:');
			if (reason === null) return;
			
			if (!reason.trim()) {
				alert('Ï≤òÎ¶¨ ÏùòÍ≤¨ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
				return;
			}
			
			const action = prompt('Ï°∞Ïπò ÏÇ¨Ìï≠ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî (Ïòà: Í≤ΩÍ≥†, 7Ïùº Ï†ïÏßÄ, ÏòÅÍµ¨Ï†ïÏßÄ):');
			if (action === null) return;
			
			if (!action.trim()) {
				alert('Ï°∞Ïπò ÏÇ¨Ìï≠ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
				return;
			}
			
			if (confirm('Ïã†Í≥†Î•º Ï≤òÎ¶¨ ÏôÑÎ£åÌïòÏãúÍ≤†ÏäµÎãàÍπå?\n\nÏ°∞Ïπò: ' + action + '\nÏùòÍ≤¨: ' + reason)) {
				// Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÎ°ú Ï≤òÎ¶¨ ÏöîÏ≤≠
				alert('Ïã†Í≥†Í∞Ä Ï≤òÎ¶¨ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');
				location.reload();
			}
		}
		
		// Ïã†Í≥† Î∞òÎ†§
		function rejectReport(id) {
			const reason = prompt('Î∞òÎ†§ ÏÇ¨Ïú†Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî:');
			if (reason === null) return;
			
			if (!reason.trim()) {
				alert('Î∞òÎ†§ ÏÇ¨Ïú†Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
				return;
			}
			
			if (confirm('Ïù¥ Ïã†Í≥†Î•º Î∞òÎ†§ÌïòÏãúÍ≤†ÏäµÎãàÍπå?\n\nÏÇ¨Ïú†: ' + reason)) {
				// Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÎ°ú Î∞òÎ†§ ÏöîÏ≤≠
				alert('Ïã†Í≥†Í∞Ä Î∞òÎ†§ÎêòÏóàÏäµÎãàÎã§.');
				window.location.href = 'admin_report_list.jsp?tab=<%= reportType %>';
			}
		}
		
		// Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í≤å Î≥¥Í∏∞
		function viewImage(imageNum) {
			alert('Ïù¥ÎØ∏ÏßÄ ' + imageNum + 'ÏùÑ(Î•º) ÌÅ¨Í≤å Î≥¥Îäî Í∏∞Îä• (Íµ¨ÌòÑ ÏòàÏ†ï)');
			// Ïã§Ï†úÎ°úÎäî Ïù¥ÎØ∏ÏßÄ Î∑∞Ïñ¥ ÌåùÏóÖÏù¥ÎÇò Î™®Îã¨Î°ú ÌëúÏãú
		}
	</script>
</body>
</html>